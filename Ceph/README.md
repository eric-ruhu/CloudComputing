# Ceph的安装和实践

### 先决条件

创建一个主机名为ceph-admin的虚拟机以备后续操作并克隆。

* 更改主机名

![]()

![]()

![]()

![]()

* 重启

![]()

* 修改完成
* 查看ip

![]()

### 步骤1-配置所有节点

***注:这里的操作都先在主机名为ceph-admin的虚拟机上做，之后再进行克隆

#### 创建一个Ceph用户

* 在所有节点上创建一个名为“ **cephuser** ” 的新用户

![]()

* 为“ cephuser”配置sudo，运行以下命令为用户创建一个sudoers文件，并使用sed编辑/ etc / sudoers文件

![]()

#### 安装和配置NTP

***注:安装NTP以同步所有节点上的日期和时间。

![]()

![]()

![]()

#### 安装Open-vm-tools

* 在VMware内部运行所有节点，则需要安装此虚拟化实用程序。

![]()

![]()

#### 禁用SELinux

![]()

### ~~***(做到这步复制虚拟机！！！！！)***~~

**复制完之后每一虚拟机都重新更改主机名（跟改ceph-admin主机名步骤一样）并查看其ip**

* mon1

![]()

![]()

* osd1

![]()

![]()

* osd2

![]()

![]()

#### 配置主机文件（所有节点）

使用vim编辑器在所有节点上编辑/ etc / hosts文件，并添加带有所有集群节点的IP地址和主机名的行。

* ceph-admin

![]()

![]()

* mon1

![]()

![]()

* osd1

![]()

![]()

* osd2

![]()

![]()

**尝试使用主机名在服务器之间ping通，以测试网络连接。**

> 例: ping -c 5 mon1
>
> ***注：这里要将所有的虚拟机全部打开要不然ping不通

![]()

### 第2步-配置SSH服务器

